/*
DayPilot Lite
Copyright (c) 2005 - 2016 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 215-lite
*/
if(typeof(DayPilot)==='undefined'){DayPilot={};};(function(){'use strict';DayPilot.ModalStatic={};DayPilot.ModalStatic.list=[];DayPilot.ModalStatic.hide=function(){if(this.list.length>0){var $a=this.list.pop();if($a){$a.hide();}}};DayPilot.ModalStatic.remove=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){$c.splice(i,1);return;}}};DayPilot.ModalStatic.close=function($d){DayPilot.ModalStatic.result($d);DayPilot.ModalStatic.hide();};DayPilot.ModalStatic.result=function(r){var $c=DayPilot.ModalStatic.list;if($c.length>0){$c[$c.length-1].result=r;}};DayPilot.ModalStatic.displayed=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){return true;}};return false;};DayPilot.ModalStatic.stretch=function(){if(this.list.length>0){var $a=this.list[this.list.length-1];if($a){$a.stretch();}}};var $e=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1);DayPilot.Modal=function($f){this.autoStretch=true;this.autoStretchFirstLoadOnly=false;this.border="10px solid #ccc";this.corners='Rounded';this.className=null;this.dragDrop=true;this.height=200;this.loadingHtml=null;this.maxHeight=null;this.opacity=30;this.scrollWithPage=true;this.top=20;this.useIframe=true;this.width=500;this.zIndex=null;this.closed=null;this.onClosed=null;var $g=this;this.id='_'+new Date().getTime()+'n'+(Math.random()*10);this.registered=false;this.start=null;this.coords=null;this.showHtml=function($h){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};if(!this.div){this.create();};this.update();if(this.useIframe){var $i=function(p,$j){return function(){p.setInnerHTML(p.id+"iframe",$j);};};window.setTimeout($i(this,$h),0);}else{if($h.nodeType){this.div.appendChild($h);}else{this.div.innerHTML=$h;}};this.update();this.register();};this.rounded=function(){return this.corners&&this.corners.toLowerCase()==='rounded';};this.showUrl=function($k){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};this.useIframe=true;if(!this.div){this.create();};var $l=this.loadingHtml;if($l){this.iframe.src="about:blank";this.setInnerHTML(this.id+"iframe",$l);};this.re(this.iframe,"load",this.onIframeLoad);this.iframe.src=$k;this.update();this.register();};this.update=function(){var $m=window;var $n=document;var scrollY=$m.pageYOffset?$m.pageYOffset:(($n.documentElement&&$n.documentElement.scrollTop)?$n.documentElement.scrollTop:$n.body.scrollTop);var $o=function(){return $g.windowRect().y;};this.hideDiv.style.filter="alpha(opacity="+this.opacity+")";this.hideDiv.style.opacity="0."+this.opacity;this.hideDiv.style.backgroundColor="black";if(this.zIndex){this.hideDiv.style.zIndex=this.zIndex;};this.hideDiv.style.display='';window.setTimeout(function(){$g.hideDiv.onclick=function(){$g.hide();};},500);this.div.className=this.className;this.div.style.border=this.border;if(this.rounded()){this.div.style.MozBorderRadius="5px";this.div.style.webkitBorderRadius="5px";this.div.style.borderRadius="5px";};this.div.style.marginLeft='-'+Math.floor(this.width/2)+"px";this.div.style.position='absolute';this.div.style.top=(scrollY+this.top)+'px';this.div.style.width=this.width+'px';if(this.zIndex){this.div.style.zIndex=this.zIndex;};if(this.height){this.div.style.height=this.height+'px';};if(this.useIframe&&this.height){this.iframe.style.height=(this.height)+'px';};this.div.style.display='';DayPilot.ModalStatic.list.push(this);};this.onIframeLoad=function(){$g.iframe.contentWindow.modal=$g;if($g.autoStretch){$g.stretch();}};this.stretch=function(){var $o=function(){return $g.windowRect().y;};var $p=function(){return $g.windowRect().x;};var $q=$p()-40;for(var w=this.width;w<$q&&this.hasHorizontalScrollbar();w+=10){this.div.style.width=w+'px';this.div.style.marginLeft='-'+Math.floor(w/2)+"px";};var $r=this.maxHeight||$o()-2*this.top;for(var h=this.height;h<$r&&this.hasVerticalScrollbar();h+=10){this.iframe.style.height=(h)+'px';this.div.style.height=h+'px';};if(this.autoStretchFirstLoadOnly){this.ue(this.iframe,"load",this.onIframeLoad);}};this.hasHorizontalScrollbar=function(){var document=this.iframe.contentWindow.document;var $s=document.compatMode==='BackCompat'?document.body:document.documentElement;var $t=$s.scrollWidth;var $u=document.body.children;for(var i=0;i<$u.length;i++){var $v=$u[i].offsetLeft+$u[i].offsetWidth;$t=Math.max($t,$v);};var $w=$t>$s.clientWidth;return $w;};this.hasVerticalScrollbar=function(){var document=this.iframe.contentWindow.document;var $s=document.compatMode==='BackCompat'?document.body:document.documentElement;var $x=$s.scrollHeight;var $u=document.body.children;for(var i=0;i<$u.length;i++){var $v=$u[i].offsetTop+$u[i].offsetHeight;$x=Math.max($x,$v);};var $y=$x>$s.clientHeight;return $y;};this.windowRect=function(){var $n=document;if($n.compatMode==="CSS1Compat"&&$n.documentElement&&$n.documentElement.clientWidth){var x=$n.documentElement.clientWidth;var y=$n.documentElement.clientHeight;return{x:x,y:y};}else{var x=$n.body.clientWidth;var y=$n.body.clientHeight;return{x:x,y:y};}};this.register=function(){if(this.registered){return;};this.re(window,'resize',this.resize);this.re(window,'scroll',this.resize);if(this.dragDrop){this.re(document,'mousemove',this.drag);this.re(document,'mouseup',this.drop);};this.registered=true;};this.drag=function(e){if(!$g.coords){return;};var e=e||window.event;var $z=$g.mc(e);var x=$z.x-$g.coords.x;var y=$z.y-$g.coords.y;$g.div.style.marginLeft='0px';$g.div.style.top=($g.start.y+y)+"px";$g.div.style.left=($g.start.x+x)+"px";};this.drop=function(e){if(!$g.coords){return;};$g.unmaskIframe();$g.coords=null;};this.maskIframe=function(){if(!this.useIframe){return;};var $A=80;var $B=document.createElement("div");$B.style.backgroundColor="#ffffff";$B.style.filter="alpha(opacity="+$A+")";$B.style.opacity="0."+$A;$B.style.width="100%";$B.style.height=this.height+"px";$B.style.position="absolute";$B.style.left='0px';$B.style.top='0px';this.div.appendChild($B);this.mask=$B;};this.unmaskIframe=function(){if(!this.useIframe){return;};this.div.removeChild(this.mask);this.mask=null;};this.resize=function(){if(!$g.hideDiv){return;};if(!$g.div){return;};if($g.hideDiv.style.display==='none'){return;};if($g.div.style.display==='none'){return;};var scrollY=window.pageYOffset?window.pageYOffset:((document.documentElement&&document.documentElement.scrollTop)?document.documentElement.scrollTop:document.body.scrollTop);if(!$g.scrollWithPage){$g.div.style.top=(scrollY+$g.top)+'px';}};this.re=function(el,ev,$C){if(el.addEventListener){el.addEventListener(ev,$C,false);}else if(el.attachEvent){el.attachEvent("on"+ev,$C);}};this.ue=function(el,ev,$C){if(el.removeEventListener){el.removeEventListener(ev,$C,false);}else if(el.detachEvent){el.detachEvent("on"+ev,$C);}};this.mc=function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY};};return{x:ev.clientX+document.documentElement.scrollLeft,y:ev.clientY+document.documentElement.scrollTop};};this.abs=function(element){var r={x:element.offsetLeft,y:element.offsetTop};while(element.offsetParent){element=element.offsetParent;r.x+=element.offsetLeft;r.y+=element.offsetTop;};return r;};this.create=function(){var $D=document.createElement("div");$D.id=this.id+"hide";$D.style.position='fixed';$D.style.left="0px";$D.style.top="0px";$D.style.right="0px";$D.style.bottom="0px";$D.style.backgroundColor="black";$D.style.opacity=0.50;$D.oncontextmenu=function(){return false;};document.body.appendChild($D);var $E=document.createElement("div");$E.id=this.id+'popup';$E.style.position='fixed';$E.style.left='50%';$E.style.top='0px';$E.style.backgroundColor='white';$E.style.width="50px";$E.style.height="50px";if(this.dragDrop){$E.onmousedown=this.dragStart;};var $F=50;var $G=null;if(this.useIframe){$G=document.createElement("iframe");$G.id=this.id+"iframe";$G.name=this.id+"iframe";$G.frameBorder='0';$G.style.width='100%';$G.style.height=$F+'px';$E.appendChild($G);};document.body.appendChild($E);this.div=$E;this.iframe=$G;this.hideDiv=$D;};this.dragStart=function(e){$g.maskIframe();$g.coords=$g.mc(e||window.event);$g.start={x:$g.div.offsetLeft,y:$g.div.offsetTop};};this.setInnerHTML=function(id,$j){var $H=window.frames[id];var $n=$H.contentWindow||$H.document||$H.contentDocument;if($n.document){$n=$n.document;};if($n.body==null){$n.write("<body></body>");};if($j.nodeType){$n.body.appendChild($j);}else{$n.body.innerHTML=$j;}};this.close=function($d){this.result=$d;this.hide();};this.hide=function(){if(this.div){this.div.style.display='none';this.hideDiv.style.display='none';if(!this.useIframe){this.div.innerHTML=null;}};DayPilot.ModalStatic.remove(this);if(this.onClosed){var $I={};$I.result=this.result;this.onClosed($I);}else if(this.closed){this.closed();}};this.$J=function(){if(!$f){return;};for(var name in $f){this[name]=$f[name];}};this.$J();};DayPilot.Modal.close=function($d){if(parent&&parent.DayPilot&&parent.DayPilot.ModalStatic){parent.DayPilot.ModalStatic.close($d);}else{throw "Unable to close DayPilot.Modal dialog.";}};DayPilot.Modal.opener=function(){return parent&&parent.DayPilot&&parent.DayPilot.ModalStatic&&parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length-1];};})();


