/*
DayPilot Lite
Copyright (c) 2005 - 2016 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 215-lite
*/
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilot.Global==='undefined'){DayPilot.Global={};};(function(){var $a=function(){};if(typeof DayPilot.Calendar!=='undefined'){return;};var DayPilotCalendar={};DayPilotCalendar.selectedCells=[];DayPilotCalendar.topSelectedCell=null;DayPilotCalendar.bottomSelectedCell=null;DayPilotCalendar.selecting=false;DayPilotCalendar.column=null;DayPilotCalendar.firstSelected=null;DayPilotCalendar.firstMousePos=null;DayPilotCalendar.originalMouse=null;DayPilotCalendar.originalHeight=null;DayPilotCalendar.originalTop=null;DayPilotCalendar.resizing=null;DayPilotCalendar.globalHandlers=false;DayPilotCalendar.moving=null;DayPilotCalendar.register=function($b){if(!DayPilotCalendar.registered){DayPilotCalendar.registered=[];};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){if(r[i]===$b){return;}};r.push($b);};DayPilotCalendar.unregister=function($b){var a=DayPilotCalendar.registered;if(!a){return;};var i=DayPilot.indexOf(a,$b);if(i===-1){return;};a.splice(i,1);};DayPilotCalendar.getCellsAbove=function($c){var $d=[];var c=DayPilotCalendar.getColumn($c);var tr=$c.parentNode;var $e=null;while(tr&&$e!==DayPilotCalendar.firstSelected){$e=tr.getElementsByTagName("td")[c];$d.push($e);tr=tr.previousSibling;while(tr&&tr.tagName!=="TR"){tr=tr.previousSibling;}};return $d;};DayPilotCalendar.getCellsBelow=function($c){var $d=[];var c=DayPilotCalendar.getColumn($c);var tr=$c.parentNode;var $e=null;while(tr&&$e!==DayPilotCalendar.firstSelected){$e=tr.getElementsByTagName("td")[c];$d.push($e);tr=tr.nextSibling;while(tr&&tr.tagName!=="TR"){tr=tr.nextSibling;}};return $d;};DayPilotCalendar.getColumn=function($c){var i=0;while($c.previousSibling){$c=$c.previousSibling;if($c.tagName==="TD"){i++;}};return i;};DayPilotCalendar.gUnload=function(ev){if(!DayPilotCalendar.registered){return;};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){var c=r[i];c.dispose();DayPilotCalendar.unregister(c);}};DayPilotCalendar.gMouseUp=function(e){if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizing.style.cursor='default';document.body.style.cursor='default';DayPilotCalendar.resizing=null;return;};var $f=DayPilotCalendar.resizing.event;var $g=DayPilotCalendar.resizingShadow.clientHeight+4;var top=DayPilotCalendar.resizingShadow.offsetTop;var $h=DayPilotCalendar.resizing.dpBorder;DayPilotCalendar.deleteShadow(DayPilotCalendar.resizingShadow);DayPilotCalendar.resizingShadow=null;DayPilotCalendar.resizing.style.cursor='default';$f.calendar.nav.top.style.cursor='auto';DayPilotCalendar.resizing.onclick=null;DayPilotCalendar.resizing=null;$f.calendar.eventResizeDispatch($f,$g,top,$h);}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.moving=null;document.body.style.cursor='default';return;};var top=DayPilotCalendar.movingShadow.offsetTop;DayPilotCalendar.deleteShadow(DayPilotCalendar.movingShadow);var $f=DayPilotCalendar.moving.event;var $i=DayPilotCalendar.movingShadow.column;DayPilotCalendar.moving=null;DayPilotCalendar.movingShadow=null;$f.calendar.nav.top.style.cursor='auto';var ev=e||window.event;$f.calendar.eventMoveDispatch($f,$i,top,ev);}else if(DayPilotCalendar.selecting&&DayPilotCalendar.topSelectedCell!==null){var $b=DayPilotCalendar.selecting.calendar;DayPilotCalendar.selecting=false;var $j=$b.getSelection();$b.timeRangeSelectedDispatch($j.start,$j.end);if($b.timeRangeSelectedHandling!=="Hold"&&$b.timeRangeSelectedHandling!=="HoldForever"){$a();}}else{DayPilotCalendar.selecting=false;}};DayPilotCalendar.deleteShadow=function($k){if(!$k){return;};if(!$k.parentNode){return;};$k.parentNode.removeChild($k);};DayPilotCalendar.moveShadow=function($l){var $k=DayPilotCalendar.movingShadow;var parent=$k.parentNode;parent.style.display='none';$k.parentNode.removeChild($k);$l.firstChild.appendChild($k);$k.style.left='0px';parent.style.display='';$k.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};DayPilotCalendar.Calendar=function(id){var $m=false;if(this instanceof DayPilotCalendar.Calendar&&!this.$1K){$m=true;this.$1K=true;};if(!$m){throw "DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'";};var $b=this;this.uniqueID=null;this.v='215-lite';this.id=id;this.clientName=id;this.cache={};this.cache.pixels={};this.elements={};this.elements.events=[];this.nav={};this.afterRender=function(){};this.fasterDispose=true;this.angularAutoApply=false;this.api=2;this.borderColor="#CED2CE";this.businessBeginsHour=9;this.businessEndsHour=18;this.cellBackColor="#ffffff";this.cellBorderColor="#DEDFDE";this.cellHeight=20;this.columnMarginRight=5;this.cornerBackColor="#F3F3F9";this.cssOnly=true;this.days=1;this.durationBarVisible=true;this.eventBackColor='#638EDE';this.eventBorderColor="#2951A5";this.eventFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.eventFontSize='8pt';this.eventFontColor="#ffffff";this.eventHeaderFontSize='8pt';this.eventHeaderFontColor="#ffffff";this.eventHeaderHeight=14;this.eventHeaderVisible=true;this.headerFontSize='10pt';this.headerFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.headerFontColor="#42658C";this.headerHeight=20;this.height=300;this.heightSpec='BusinessHours';this.hideUntilInit=true;this.hourHalfBorderColor="#EBEDEB";this.hourBorderColor="#DEDFDE";this.hourFontColor="#42658C";this.hourFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.hourFontSize="16pt";this.hourNameBackColor="#F3F3F9";this.hourNameBorderColor="#DEDFDE";this.hourWidth=45;this.initScrollPos='Auto';this.loadingLabelText="Loading...";this.loadingLabelVisible=true;this.loadingLabelBackColor="ff0000";this.loadingLabelFontColor="#ffffff";this.loadingLabelFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.loadingLabelFontSize="10pt";this.locale="en-us";this.selectedColor="#316AC5";this.showToolTip=true;this.startDate=new DayPilot.Date().getDatePart();this.cssClassPrefix="calendar_default";this.theme=null;this.timeFormat='Auto';this.visible=true;this.timeRangeSelectedHandling='Enabled';this.eventClickHandling='Enabled';this.eventResizeHandling='Update';this.eventMoveHandling='Update';this.onBeforeEventRender=null;this.onEventClick=null;this.onEventClicked=null;this.onEventMove=null;this.onEventMoved=null;this.onEventResize=null;this.onEventResized=null;this.onTimeRangeSelect=null;this.onTimeRangeSelected=null;this.clearSelection=function(){for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $c=DayPilotCalendar.selectedCells[j];if($c){if($c.selected){DayPilot.de($c.selected);$c.firstChild&&($c.firstChild.style.display='');$c.selected=null;}}};DayPilotCalendar.selectedCells=[];};this.ie=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1);this.ff=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!==-1);this.opera105=(function(){if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=10.5;};return false;})();this.webkit522=(function(){if(/AppleWebKit[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=522;};return false;})();this.cleanSelection=this.clearSelection;this.$1L=function($n,$o,$p){var $q={};$q.action=$n;$q.parameters=$p;$q.data=$o;$q.header=this.$1M();var $r="JSON"+DayPilot.JSON.stringify($q);__doPostBack($b.uniqueID,$r);};this.$1N=function($n,$o,$p){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.callbackTimeout=window.setTimeout(function(){$b.loadingStart();},100);var $q={};$q.action=$n;$q.parameters=$p;$q.data=$o;$q.header=this.$1M();var $r="JSON"+DayPilot.JSON.stringify($q);if(this.backendUrl){DayPilot.request(this.backendUrl,this.callBackResponse,$r,this.ajaxError);}else if(typeof WebForm_DoCallback==='function'){WebForm_DoCallback(this.uniqueID,$r,this.updateView,this.clientName,this.onCallbackError,true);}};this.onCallbackError=function($s,$t){alert("Error!\r\nResult: "+$s+"\r\nContext:"+$t);};this.dispose=function(){var c=$b;c.deleteEvents();c.nav.zoom.onmousemove=null;c.nav.scroll.root=null;DayPilot.pu(c.nav.loading);c.disposeMain();c.disposeHeader();c.nav.select=null;c.nav.cornerRight=null;c.nav.scrollable=null;c.nav.zoom=null;c.nav.loading=null;c.nav.header=null;c.nav.hourTable=null;c.nav.scrolltop=null;c.nav.scroll=null;c.nav.main=null;c.nav.message=null;c.nav.messageClose=null;c.nav.top=null;DayPilotCalendar.unregister(c);};this.registerDispose=function(){this.nav.top.dispose=this.dispose;};this.callBackResponse=function($u){$b.updateView($u.responseText);};this.$1M=function(){var h={};h.control="dpc";h.id=this.id;h.v=this.v;h.days=$b.days;h.startDate=$b.startDate;h.heightSpec=$b.heightSpec;h.businessBeginsHour=$b.businessBeginsHour;h.businessEndsHour=$b.businessEndsHour;h.hashes=$b.hashes;h.backColor=$b.cellBackColor;h.timeFormat=$b.timeFormat;h.viewType=$b.viewType;h.locale=$b.locale;return h;};this.createShadow=function($v,$w){var $x=$v.parentNode;while($x&&$x.tagName!=="TD"){$x=$x.parentNode;};var $k=document.createElement('div');$k.setAttribute('unselectable','on');$k.style.position='absolute';$k.style.width=($v.offsetWidth-4)+'px';$k.style.height=($v.offsetHeight-4)+'px';$k.style.left=($v.offsetLeft)+'px';$k.style.top=($v.offsetTop)+'px';$k.style.border='2px dotted #666666';$k.style.zIndex=101;$k.style.backgroundColor="#aaaaaa";$k.style.opacity=0.5;$k.style.filter="alpha(opacity=50)";$k.style.border='2px solid #aaaaaa';if($w&&false){$k.style.overflow='hidden';$k.style.fontSize=$v.style.fontSize;$k.style.fontFamily=$v.style.fontFamily;$k.style.color=$v.style.color;$k.innerHTML=$v.data.client.html();};$x.firstChild.appendChild($k);return $k;};this.$1O={};this.$1O.locale=function(){var $y=DayPilot.Locale.find($b.locale);if(!$y){return DayPilot.Locale.US;};return $y;};this.$1O.timeFormat=function(){if($b.timeFormat!=='Auto'){return $b.timeFormat;};return this.locale().timeFormat;};var $z=this.$1O;this.updateView=function($s,$t){if($s&&$s.indexOf("$$$")===0){if(window.console){console.log("Error received from the server side: "+$s);}else{throw "Error received from the server side: "+$s;};return;};var $s=eval("("+$s+")");if($s.CallBackRedirect){document.location.href=$s.CallBackRedirect;return;};if($s.UpdateType==="None"){$b.loadingStop();$b.$1P();return;};$b.deleteEvents();if($s.UpdateType==="Full"){$b.columns=$s.Columns;$b.days=$s.Days;$b.startDate=new DayPilot.Date($s.StartDate);$b.heightSpec=$s.HeightSpec?$s.HeightSpec:$b.heightSpec;$b.businessBeginsHour=$s.BusinessBeginsHour?$s.BusinessBeginsHour:$b.businessBeginsHour;$b.businessEndsHour=$s.BusinessEndsHour?$s.BusinessEndsHour:$b.businessEndsHour;$b.headerDateFormat=$s.HeaderDateFormat?$s.HeaderDateFormat:$b.headerDateFormat;$b.viewType=$s.ViewType;$b.backColor=$s.BackColor?$s.BackColor:$b.backColor;$b.eventHeaderVisible=$s.EventHeaderVisible?$s.EventHeaderVisible:$b.eventHeaderVisible;$b.timeFormat=$s.TimeFormat?$s.TimeFormat:$b.timeFormat;$b.locale=$s.Locale?$s.Locale:$b.locale;$b.prepareColumns();};if($s.Hashes){for(var $A in $s.Hashes){$b.hashes[$A]=$s.Hashes[$A];}};$b.events.list=$s.Events;$b.loadEvents();$b.updateHeaderHeight();if($s.UpdateType==="Full"){$b.drawHeader();$b.drawMain();$b.drawHourTable();$b.updateHeight();};$b.$1P();$b.drawEvents();$b.clearSelection();$b.afterRender($s.CallBackData,true);$b.loadingStop();};this.durationHours=function(){return 24;};this.businessHoursSpan=function(){if(this.businessBeginsHour>this.businessEndsHour){return 24-this.businessBeginsHour+this.businessEndsHour;}else{return this.businessEndsHour-this.businessBeginsHour;}};this.rowCount=function(){return 48;};this.$1Q=function(){return $b.api===2;};this.eventClickCallBack=function(e,$o){this.$1N('EventClick',$o,e);};this.eventClickPostBack=function(e,$o){this.$1L('EventClick',$o,e);};this.eventClickDispatch=function(e){var $B=this;var e=$B.event;if($b.$1Q()){var $C={};$C.e=e;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $b.onEventClick==='function'){$b.$1R.apply(function(){$b.onEventClick($C);});if($C.preventDefault.value){return;}};switch($b.eventClickHandling){case 'CallBack':$b.eventClickCallBack(e);break;case 'PostBack':$b.eventClickPostBack(e);break;};if(typeof $b.onEventClicked==='function'){$b.$1R.apply(function(){$b.onEventClicked($C);});}}else{switch($b.eventClickHandling){case 'PostBack':$b.eventClickPostBack(e);break;case 'CallBack':$b.eventClickCallBack(e);break;case 'JavaScript':$b.onEventClick(e);break;}}};this.eventResizeCallBack=function(e,$D,$E,$o){if(!$D)throw 'newStart is null';if(!$E)throw 'newEnd is null';var $F={};$F.e=e;$F.newStart=$D;$F.newEnd=$E;this.$1N('EventResize',$o,$F);};this.eventResizePostBack=function(e,$D,$E,$o){if(!$D)throw 'newStart is null';if(!$E)throw 'newEnd is null';var $F={};$F.e=e;$F.newStart=$D;$F.newEnd=$E;this.$1L('EventResize',$o,$F);};this.eventResizeDispatch=function(e,$G,$H,$h){var $I=1;var $D=new Date();var $E=new Date();var $J=e.start();var end=e.end();if($h==='top'){var $K=$J.getDatePart();var $L=Math.floor(($H-$I)/$b.cellHeight);var $M=$L*30;var ts=$M*60*1000;$D=$K.addTime(ts);$E=e.end();}else if($h==='bottom'){var $K=end.getDatePart();var $L=Math.floor(($H+$G-$I)/$b.cellHeight);var $M=$L*30;var ts=$M*60*1000;$D=$J;$E=$K.addTime(ts);};if($b.$1Q()){var $C={};$C.e=e;$C.newStart=$D;$C.newEnd=$E;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $b.onEventResize==='function'){$b.$1R.apply(function(){$b.onEventResize($C);});if($C.preventDefault.value){return;}};switch($b.eventResizeHandling){case 'PostBack':$b.eventResizePostBack(e,$D,$E);break;case 'CallBack':$b.eventResizeCallBack(e,$D,$E);break;case 'Update':e.start($D);e.end($E);$b.events.update(e);break;};if(typeof $b.onEventResized==='function'){$b.$1R.apply(function(){$b.onEventResized($C);});}}else{switch($b.eventResizeHandling){case 'PostBack':$b.eventResizePostBack(e,$D,$E);break;case 'CallBack':$b.eventResizeCallBack(e,$D,$E);break;case 'JavaScript':$b.onEventResize(e,$D,$E);break;}}};this.eventMovePostBack=function(e,$D,$E,$N,$o){if(!$D)throw 'newStart is null';if(!$E)throw 'newEnd is null';var $F={};$F.e=e;$F.newStart=$D;$F.newEnd=$E;this.$1L('EventMove',$o,$F);};this.eventMoveCallBack=function(e,$D,$E,$N,$o){if(!$D)throw 'newStart is null';if(!$E)throw 'newEnd is null';var $F={};$F.e=e;$F.newStart=$D;$F.newEnd=$E;this.$1N('EventMove',$o,$F);};this.eventMoveDispatch=function(e,$i,$H,ev){var $I=1;var $L=Math.floor(($H-$I)/$b.cellHeight);var $O=$L*30*60*1000;var $J=e.start();var end=e.end();var $K=new Date();if($J instanceof DayPilot.Date){$J=$J.toDate();};$K.setTime(Date.UTC($J.getUTCFullYear(),$J.getUTCMonth(),$J.getUTCDate()));var $P=$J.getTime()-($K.getTime()+$J.getUTCHours()*3600*1000+Math.floor($J.getUTCMinutes()/30)*30*60*1000);var length=end.getTime()-$J.getTime();var $Q=this.columns[$i];var $R=$Q.Start.getTime();var $S=new Date();$S.setTime($R+$O+$P);var $D=new DayPilot.Date($S);var $E=$D.addTime(length);if($b.$1Q()){var $C={};$C.e=e;$C.newStart=$D;$C.newEnd=$E;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $b.onEventMove==='function'){$b.$1R.apply(function(){$b.onEventMove($C);});if($C.preventDefault.value){return;}};switch($b.eventMoveHandling){case 'PostBack':$b.eventMovePostBack(e,$D,$E,$Q.Value);break;case 'CallBack':$b.eventMoveCallBack(e,$D,$E,$Q.Value);break;case 'Update':e.start($D);e.end($E);$b.events.update(e);break;};if(typeof $b.onEventMoved==='function'){$b.$1R.apply(function(){$b.onEventMoved($C);});}}else{switch($b.eventMoveHandling){case 'PostBack':$b.eventMovePostBack(e,$D,$E,$Q.Value);break;case 'CallBack':$b.eventMoveCallBack(e,$D,$E,$Q.Value);break;case 'JavaScript':$b.onEventMove(e,$D,$E,$Q.Value,false);break;}}};this.timeRangeSelectedPostBack=function($J,end,$T,$o){var $U={};$U.start=$J;$U.end=end;this.$1L('TimeRangeSelected',$o,$U);};this.timeRangeSelectedCallBack=function($J,end,$T,$o){var $U={};$U.start=$J;$U.end=end;this.$1N('TimeRangeSelected',$o,$U);};this.timeRangeSelectedDispatch=function($J,end){$J=new DayPilot.Date($J);end=new DayPilot.Date(end);if(this.$1Q()){var $C={};$C.start=$J;$C.end=end;$C.preventDefault=function(){this.preventDefault.value=true;};if(typeof $b.onTimeRangeSelect==='function'){$b.$1R.apply(function(){$b.onTimeRangeSelect($C);});if($C.preventDefault.value){return;}};switch($b.timeRangeSelectedHandling){case 'PostBack':$b.timeRangeSelectedPostBack($J,end);break;case 'CallBack':$b.timeRangeSelectedCallBack($J,end);break;};if(typeof $b.onTimeRangeSelected==='function'){$b.$1R.apply(function(){$b.onTimeRangeSelected($C);});}}else{switch($b.timeRangeSelectedHandling){case 'PostBack':$b.timeRangeSelectedPostBack($J,end);break;case 'CallBack':$b.timeRangeSelectedCallBack($J,end);break;case 'JavaScript':$b.onTimeRangeSelected($J,end);break;}}};this.onCellMousedown=function(ev){if(DayPilotCalendar.selecting){return;};if($b.timeRangeSelectedHandling==="Disabled"){return;};var $V=(window.event)?window.event.button:ev.which;if($V!==1&&$V!==0){return;};DayPilotCalendar.firstMousePos=DayPilot.mc(ev||window.event);DayPilotCalendar.selecting={};DayPilotCalendar.selecting.calendar=$b;if(DayPilotCalendar.selectedCells){$b.clearSelection();DayPilotCalendar.selectedCells=[];};DayPilotCalendar.column=DayPilotCalendar.getColumn(this);DayPilotCalendar.selectedCells.push(this);DayPilotCalendar.firstSelected=this;DayPilotCalendar.topSelectedCell=this;DayPilotCalendar.bottomSelectedCell=this;$b.activateSelection();return false;};this.activateSelection=function(){var $W=this.getSelection();for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $c=DayPilotCalendar.selectedCells[j];if($c&&!$c.selected){var $X=document.createElement("div");$X.style.height=($b.cellHeight-1)+"px";$X.style.backgroundColor=$b.selectedColor;$c.firstChild.style.display="none";$c.insertBefore($X,$c.firstChild);$c.selected=$X;}}};this.mousemove=function(ev){if(typeof(DayPilotCalendar)==='undefined'){return;};if(!DayPilotCalendar.selecting){return;};var $Y=DayPilot.mc(ev||window.event);var $Z=DayPilotCalendar.getColumn(this);if($Z!==DayPilotCalendar.column){return;};$b.clearSelection();if($Y.y<DayPilotCalendar.firstMousePos.y){DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsBelow(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.selectedCells[0];DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.firstSelected;}else{DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsAbove(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.firstSelected;DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.selectedCells[0];};$b.activateSelection();};this.getSelection=function(){var $J=DayPilotCalendar.topSelectedCell.start;var end=DayPilotCalendar.bottomSelectedCell.end;return new DayPilot.Selection($J,end,null,$b);};this.mouseup=function(ev){};this.prepareColumns=function(){this.columns=this.$1S();for(var i=0;i<this.columns.length;i++){this.activateColumn(this.columns[i]);}};this.activateColumn=function($l){$l.Start=new DayPilot.Date($l.Start);$l.putIntoBlock=function(ep){for(var i=0;i<this.blocks.length;i++){var $00=this.blocks[i];if($00.overlapsWith(ep.part.top,ep.part.height)){$00.events.push(ep);$00.min=Math.min($00.min,ep.part.top);$00.max=Math.max($00.max,ep.part.top+ep.part.height);return i;}};var $00=[];$00.lines=[];$00.events=[];$00.overlapsWith=function($J,$01){var end=$J+$01-1;if(!(end<this.min||$J>this.max-1)){return true;};return false;};$00.putIntoLine=function(ep){var $02=this;for(var i=0;i<this.lines.length;i++){var $03=this.lines[i];if($03.isFree(ep.part.top,ep.part.height)){$03.push(ep);return i;}};var $03=[];$03.isFree=function($J,$01){var end=$J+$01-1;var $04=this.length;for(var i=0;i<$04;i++){var e=this[i];if(!(end<e.part.top||$J>e.part.top+e.part.height-1)){return false;}};return true;};$03.push(ep);this.lines.push($03);return this.lines.length-1;};$00.events.push(ep);$00.min=ep.part.top;$00.max=ep.part.top+ep.part.height;this.blocks.push($00);return this.blocks.length-1;};$l.putIntoLine=function(ep){var $02=this;for(var i=0;i<this.lines.length;i++){var $03=this.lines[i];if($03.isFree(ep.part.top,ep.part.height)){$03.push(ep);return i;}};var $03=[];$03.isFree=function($J,$01){var end=$J+$01-1;var $04=this.length;for(var i=0;i<$04;i++){var e=this[i];if(!(end<e.part.top||$J>e.part.top+e.part.height-1)){return false;}};return true;};$03.push(ep);this.lines.push($03);return this.lines.length-1;};};this.$1S=function(){var $05=[];var $J=this.startDate.getDatePart();var $06=this.days;switch(this.viewType){case "Day":$06=1;break;case "Week":$06=7;$J=$J.firstDayOfWeek($z.locale().weekStarts);break;case "WorkWeek":$06=5;$J=$J.firstDayOfWeek(1);break;};for(var i=0;i<$06;i++){var $07=$b.headerDateFormat?$b.headerDateFormat:$z.locale().datePattern;var $l={};$l.Start=$J.addDays(i);$l.Name=$l.Start.toString($07,$z.locale());$l.InnerHTML=$l.Name;$05.push($l);};return $05;};this.visibleStart=function(){return this.columns[0].Start;};this.visibleEnd=function(){var $04=this.columns.length-1;return this.columns[$04].Start.addDays(1);};this.$1T=function($08){var $09=this.theme||this.cssClassPrefix;if($09){return $09+$08;}else{return "";}};this.deleteEvents=function(){if(this.elements.events){for(var i=0;i<this.elements.events.length;i++){var $X=this.elements.events[i];var $v=$X.event;if($v){$v.calendar=null;};$X.onclick=null;$X.onclickSave=null;$X.onmouseover=null;$X.onmouseout=null;$X.onmousemove=null;$X.onmousedown=null;if($X.firstChild&&$X.firstChild.firstChild&&$X.firstChild.firstChild.tagName&&$X.firstChild.firstChild.tagName.toUpperCase()==='IMG'){var $0a=$X.firstChild.firstChild;$0a.onmousedown=null;$0a.onmousemove=null;$0a.onclick=null;};$X.helper=null;$X.data=null;$X.event=null;DayPilot.de($X);}};this.elements.events=[];};this.$1U=function(e){var $o=e.cache||e.data;var $0b=this.nav.events;var $0c=true;var $0d=true;var $0e=false;var $0f=this.eventBorderColor;var $X=document.createElement("div");$X.style.position='absolute';$X.style.left=e.part.left+'%';$X.style.top=(e.part.top)+'px';$X.style.width=e.part.width+'%';$X.style.height=Math.max(e.part.height,2)+'px';$X.style.overflow='hidden';$X.data=e;$X.event=e;$X.unselectable='on';$X.style.MozUserSelect='none';$X.style.KhtmlUserSelect='none';$X.className=this.$1T("_event");if($o.cssClass){DayPilot.Util.addClass($X,$o.cssClass);};$X.isFirst=e.part.start.getTime()===e.start().getTime();$X.isLast=e.part.end.getTime()===e.end().getTime();$X.onclick=this.eventClickDispatch;$X.onmousemove=function(ev){var $0g=5;var $0h=$b.eventHeaderVisible?($b.eventHeaderHeight):10;if(typeof(DayPilotCalendar)==='undefined'){return;};var $0i=DayPilot.mo3($X,ev);if(!$0i){return;};if(DayPilotCalendar.resizing||DayPilotCalendar.moving){return;};var $0j=this.isLast;if($0i.y<=$0h&&$b.eventResizeHandling!=='Disabled'){this.style.cursor="n-resize";this.dpBorder='top';}else if(this.offsetHeight-$0i.y<=$0g&&$b.eventResizeHandling!=='Disabled'){if($0j){this.style.cursor="s-resize";this.dpBorder='bottom';}else{this.style.cursor='not-allowed';}}else if(!DayPilotCalendar.resizing&&!DayPilotCalendar.moving){if($b.eventClickHandling!=='Disabled'){this.style.cursor='pointer';}else{this.style.cursor='default';}}};$X.onmousedown=function(ev){ev=ev||window.event;var $V=ev.which||ev.button;if((this.style.cursor==='n-resize'||this.style.cursor==='s-resize')&&$V===1){DayPilotCalendar.resizing=this;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalHeight=this.offsetHeight;DayPilotCalendar.originalTop=this.offsetTop;$b.nav.top.style.cursor=this.style.cursor;}else if($V===1&&$b.eventMoveHandling!=='Disabled'){DayPilotCalendar.moving=this;DayPilotCalendar.moving.event=this.event;var $0k=DayPilotCalendar.moving.helper={};$0k.oldColumn=$b.columns[this.data.part.dayIndex].Value;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalTop=this.offsetTop;var $0i=DayPilot.mo3(this,ev);if($0i){DayPilotCalendar.moveOffsetY=$0i.y;}else{DayPilotCalendar.moveOffsetY=0;};$b.nav.top.style.cursor='move';};return false;};var $0l=document.createElement("div");$0l.setAttribute("unselectable","on");$0l.className=$b.$1T("_event_inner");$0l.innerHTML=e.client.html();if($o.borderColor){$0l.style.borderColor=$o.borderColor;};if($o.backColor){$0l.style.background=$o.backColor;if(DayPilot.browser.ie9||DayPilot.browser.ielt9){$0l.style.filter='';}};if($o.fontColor){$0l.style.color=$o.fontColor;};$X.appendChild($0l);if(e.client.barVisible()){var $g=e.part.height-2;var $0m=100*e.part.barTop/$g;var $0n=Math.ceil(100*e.part.barHeight/$g);var $0o=document.createElement("div");$0o.setAttribute("unselectable","on");$0o.className=this.$1T("_event_bar");$0o.style.position="absolute";if($o.barBackColor){$0o.style.backgroundColor=$o.barBackColor;};var $0p=document.createElement("div");$0p.setAttribute("unselectable","on");$0p.className=this.$1T("_event_bar_inner");$0p.style.top=$0m+"%";if(0<$0n&&$0n<=1){$0p.style.height="1px";}else{$0p.style.height=$0n+"%";};if($o.barColor){$0p.style.backgroundColor=$o.barColor;};$0o.appendChild($0p);$X.appendChild($0o);};if($0b.rows[0].cells[e.part.dayIndex]){var $0q=$0b.rows[0].cells[e.part.dayIndex].firstChild;$0q.appendChild($X);$b.makeChildrenUnselectable($X);};$b.elements.events.push($X);};this.makeChildrenUnselectable=function(el){var c=(el&&el.childNodes)?el.childNodes.length:0;for(var i=0;i<c;i++){try{var $0r=el.childNodes[i];if($0r.nodeType===1){$0r.unselectable='on';this.makeChildrenUnselectable($0r);}}catch(e){}}};this.drawEvents=function(){for(var i=0;i<this.columns.length;i++){var $0s=this.columns[i];if(!$0s.blocks){continue;};for(var m=0;m<$0s.blocks.length;m++){var $00=$0s.blocks[m];for(var j=0;j<$00.lines.length;j++){var $03=$00.lines[j];for(var k=0;k<$03.length;k++){var e=$03[k];e.part.width=100/$00.lines.length;e.part.left=e.part.width*j;var $0t=(j===$00.lines.length-1);if(!$0t){e.part.width=e.part.width*1.5;};this.$1U(e);}}}}};this.drawTop=function(){this.nav.top.innerHTML='';if(this.cssOnly){DayPilot.Util.addClass(this.nav.top,this.$1T("_main"));}else{this.nav.top.style.lineHeight="1.2";this.nav.top.style.textAlign="left";};this.nav.top.style.MozUserSelect='none';this.nav.top.style.KhtmlUserSelect='none';this.nav.top.style.position='relative';this.nav.top.style.width=this.width?this.width:'100%';if(this.hideUntilInit){this.nav.top.style.visibility='hidden';};if(!this.visible){this.nav.top.style.display="none";};this.nav.scroll=document.createElement("div");this.nav.scroll.style.height=this.getScrollableHeight()+"px";if(this.heightSpec==='BusinessHours'){this.nav.scroll.style.overflow="auto";}else{this.nav.scroll.style.overflow="hidden";};this.nav.scroll.style.position="relative";if(!this.cssOnly){this.nav.scroll.style.border="1px solid "+this.borderColor;this.nav.scroll.style.backgroundColor=this.hourNameBackColor;};var $0u=this.drawTopHeaderDiv();this.nav.top.appendChild($0u);this.nav.scroll.style.zoom=1;var $0v=this.drawScrollable();this.nav.scrollable=$0v.firstChild;this.nav.scroll.appendChild($0v);this.nav.top.appendChild(this.nav.scroll);this.nav.scrollLayer=document.createElement("div");this.nav.scrollLayer.style.position='absolute';this.nav.scrollLayer.style.top='0px';this.nav.scrollLayer.style.left='0px';this.nav.top.appendChild(this.nav.scrollLayer);this.nav.loading=document.createElement("div");this.nav.loading.style.position='absolute';this.nav.loading.style.top='0px';this.nav.loading.style.left=(this.hourWidth+5)+"px";this.nav.loading.style.backgroundColor=this.loadingLabelBackColor;this.nav.loading.style.fontSize=this.loadingLabelFontSize;this.nav.loading.style.fontFamily=this.loadingLabelFontFamily;this.nav.loading.style.color=this.loadingLabelFontColor;this.nav.loading.style.padding='2px';this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.display='none';this.nav.top.appendChild(this.nav.loading);};this.drawHourTable=function(){if(!this.fasterDispose)DayPilot.pu(this.nav.hourTable);this.nav.scrollable.rows[0].cells[0].innerHTML='';this.nav.hourTable=this.createHourTable();this.nav.scrollable.rows[0].cells[0].appendChild(this.nav.hourTable);};this.drawScrollable=function(){var $0w=document.createElement("div");$0w.style.zoom=1;$0w.style.position='relative';var $0x=document.createElement("table");$0x.cellSpacing="0";$0x.cellPadding="0";$0x.border="0";$0x.style.border="0px none";$0x.style.width="100%";$0x.style.position='absolute';var r=$0x.insertRow(-1);var c;c=r.insertCell(-1);c.valign="top";c.style.padding='0px';c.style.border='0px none';this.nav.hourTable=this.createHourTable();c.appendChild(this.nav.hourTable);c=r.insertCell(-1);c.valign="top";c.width="100%";c.style.padding='0px';c.style.border='0px none';if(!this.cssOnly){c.appendChild(this.createEventsAndCells());}else{var $0v=document.createElement("div");$0v.style.position="relative";c.appendChild($0v);$0v.appendChild(this.createEventsAndCells());$0v.appendChild(this.$1V());};$0w.appendChild($0x);this.nav.zoom=$0w;return $0w;};this.createEventsAndCells=function(){var $0x=document.createElement("table");$0x.cellPadding="0";$0x.cellSpacing="0";$0x.border="0";$0x.style.width="100%";$0x.style.border="0px none";$0x.style.tableLayout='fixed';if(!this.cssOnly){$0x.style.borderLeft="1px solid "+this.borderColor;};this.nav.main=$0x;this.nav.events=$0x;return $0x;};this.$1V=function(){var $0x=document.createElement("table");$0x.style.top="0px";$0x.cellPadding="0";$0x.cellSpacing="0";$0x.border="0";$0x.style.position="absolute";$0x.style.width="100%";$0x.style.border="0px none";$0x.style.tableLayout='fixed';this.nav.events=$0x;var $0y=true;var $05=this.columns;var cl=$05.length;var r=($0y)?$0x.insertRow(-1):$0x.rows[0];for(var j=0;j<cl;j++){var c=($0y)?r.insertCell(-1):r.cells[j];if($0y){c.style.padding='0px';c.style.border='0px none';c.style.height='0px';c.style.overflow='visible';if(!$b.rtl){c.style.textAlign='left';};var $X=document.createElement("div");$X.style.marginRight=$b.columnMarginRight+"px";$X.style.position='relative';$X.style.height='1px';if(!this.cssOnly){$X.style.fontSize='1px';$X.style.lineHeight='1.2';};$X.style.marginTop='-1px';c.appendChild($X);}};return $0x;};this.createHourTable=function(){var $0x=document.createElement("table");$0x.cellSpacing="0";$0x.cellPadding="0";$0x.border="0";$0x.style.border='0px none';$0x.style.width=this.hourWidth+"px";$0x.oncontextmenu=function(){return false;};var $0z=this.cssOnly?0:1;if($0z){var r=$0x.insertRow(-1);r.style.height="1px";r.style.backgroundColor="white";var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';};var $0A=24;for(var i=0;i<$0A;i++){this.createHourRow($0x,i);};return $0x;};this.createHourRow=function($0x,i){var $g=(this.cellHeight*2);var r=$0x.insertRow(-1);r.style.height=$g+"px";var c=r.insertCell(-1);c.valign="bottom";c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.style.cursor="default";c.style.padding='0px';c.style.border='0px none';var $0B=document.createElement("div");$0B.style.position="relative";if(this.cssOnly){$0B.className=this.$1T("_rowheader");};$0B.style.width=this.hourWidth+"px";$0B.style.height=($g)+"px";$0B.style.overflow='hidden';$0B.unselectable='on';var $00=document.createElement("div");if(this.cssOnly){$00.className=this.$1T("_rowheader_inner");}else{$00.style.borderBottom="1px solid "+this.hourNameBorderColor;$00.style.textAlign="right";};$00.style.height=($g-1)+"px";$00.unselectable="on";var $0C=document.createElement("div");if(!this.cssOnly){$0C.style.padding="2px";$0C.style.fontFamily=this.hourFontFamily;$0C.style.fontSize=this.hourFontSize;$0C.style.color=this.hourFontColor;};$0C.unselectable="on";var $J=this.startDate.addHours(i);var $0D=$J.getHours();var am=$0D<12;var $0E=$z.timeFormat();if($0E==="Clock12Hours"){$0D=$0D%12;if($0D===0){$0D=12;}};$0C.innerHTML=$0D;var $0F=document.createElement("span");$0F.unselectable="on";if(!this.cssOnly){$0F.style.fontSize="10px";$0F.style.verticalAlign="super";}else{$0F.className=this.$1T("_rowheader_minutes");};var $0G;if($0E==="Clock12Hours"){if(am){$0G="AM";}else{$0G="PM";}}else{$0G="00";};if(!this.cssOnly){$0F.innerHTML="&nbsp;"+$0G;}else{$0F.innerHTML=$0G;};$0C.appendChild($0F);$00.appendChild($0C);$0B.appendChild($00);c.appendChild($0B);};this.getScrollableHeight=function(){switch(this.heightSpec){case "Full":return(24*2*this.cellHeight);case "BusinessHours":var $0H=this.businessHoursSpan();return $0H*this.cellHeight*2;case "BusinessHoursNoScroll":var $0H=this.businessHoursSpan();return $0H*this.cellHeight*2;default:throw "DayPilot.Calendar: Unexpected 'heightSpec' value.";}};this.$1W=function(){var parent=$b.nav.corner?$b.nav.corner.parentNode:null;if(!parent){return;};parent.innerHTML='';var $0I=this.drawCorner();parent.appendChild($0I);$b.nav.corner=$0I;};this.drawTopHeaderDiv=function(){var $0u=document.createElement("div");if(!this.cssOnly){$0u.style.borderLeft="1px solid "+this.borderColor;$0u.style.borderRight="1px solid "+this.borderColor;};$0u.style.overflow="auto";var $0x=document.createElement("table");$0x.cellPadding="0";$0x.cellSpacing="0";$0x.border="0";$0x.style.width="100%";$0x.style.borderCollapse='separate';$0x.style.border="0px none";var r=$0x.insertRow(-1);var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';var $0I=this.drawCorner();c.appendChild($0I);this.nav.corner=$0I;c=r.insertCell(-1);c.style.width="100%";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.valign="top";c.style.position='relative';c.style.padding='0px';c.style.border='0px none';this.nav.header=document.createElement("table");this.nav.header.cellPadding="0";this.nav.header.cellSpacing="0";this.nav.header.border="0";this.nav.header.width="100%";this.nav.header.style.tableLayout="fixed";if(!this.cssOnly){this.nav.header.style.borderBottom="0px none #000000";this.nav.header.style.borderRight="0px none #000000";this.nav.header.style.borderLeft="1px solid "+this.borderColor;this.nav.header.style.borderTop="1px solid "+this.borderColor;};this.nav.header.oncontextmenu=function(){return false;};var $0J=this.nav.scroll.style.overflow!=='hidden';if(!this.cssOnly){if($0J){this.nav.header.style.borderRight="1px solid "+this.borderColor;}};c.appendChild(this.nav.header);if($0J){c=r.insertCell(-1);c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;c.style.borderTop="1px solid "+this.borderColor;c.style.borderBottom="0px none";c.style.borderLeft="0px none";c.style.borderRight="0px none";c.style.padding='0px';c.style.verticalAlign='top';c.innerHTML="&nbsp;";};var $0K=document.createElement("div");$0K.unselectable="on";$0K.style.position="relative";$0K.style.width="16px";if(!this.cssOnly){$0K.style.lineHeight="1px";$0K.style.fontSize="1px";$0K.style.height="1px";}else{$0K.style.height=this.headerHeight+"px";$0K.className=this.$1T("_cornerright");var $0l=document.createElement("div");$0l.className=this.$1T('_cornerright_inner');$0K.appendChild($0l);};c.appendChild($0K);this.nav.cornerRight=$0K;};$0u.appendChild($0x);return $0u;};this.drawCorner=function(){var $0v=document.createElement("div");$0v.style.position='relative';if(this.cssOnly){$0v.className=this.$1T("_corner");}else{$0v.style.backgroundColor=this.hourNameBackColor;$0v.style.fontFamily=this.headerFontFamily;$0v.style.fontSize=this.headerFontSize;$0v.style.color=this.headerFontColor;$0v.style.borderTop="1px solid "+this.borderColor;};$0v.style.width=this.hourWidth+"px";$0v.style.height=this.headerHeight+"px";$0v.oncontextmenu=function(){return false;};var $0I=document.createElement("div");$0I.unselectable="on";if(this.cssOnly){$0I.className=this.$1T("_corner_inner");};$0v.appendChild($0I);return $0v;};this.disposeMain=function(){var $0x=this.nav.main;$0x.root=null;$0x.onmouseup=null;for(var y=0;y<$0x.rows.length;y++){var r=$0x.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.root=null;c.onmousedown=null;c.onmousemove=null;c.onmouseout=null;c.onmouseup=null;}};if(!this.fasterDispose)DayPilot.pu($0x);};this.drawMain=function(){var $0L=[];var $0M=[];var $0x=this.nav.main;var $L=30*60*1000;var $0N=this.rowCount();var $05=$b.columns;var $0y=true;if($0x){this.disposeMain();}while($0x&&$0x.rows&&$0x.rows.length>0&&$0y){if(!this.fasterDispose){DayPilot.pu($0x.rows[0]);};$0x.deleteRow(0);};this.tableCreated=true;var cl=$05.length;if(this.cssOnly){var $0O=this.nav.events;while($0O&&$0O.rows&&$0O.rows.length>0&&$0y){if(!this.fasterDispose){DayPilot.pu($0O.rows[0]);};$0O.deleteRow(0);};var cl=$05.length;var r=($0y)?$0O.insertRow(-1):$0O.rows[0];for(var j=0;j<cl;j++){var c=($0y)?r.insertCell(-1):r.cells[j];if($0y){c.style.padding='0px';c.style.border='0px none';c.style.height='0px';c.style.overflow='visible';if(!$b.rtl){c.style.textAlign='left';};var $X=document.createElement("div");$X.style.marginRight=$b.columnMarginRight+"px";$X.style.position='relative';$X.style.height='1px';if(!this.cssOnly){$X.style.fontSize='1px';$X.style.lineHeight='1.2';};$X.style.marginTop='-1px';c.appendChild($X);}}};if(!this.cssOnly){var r=($0y)?$0x.insertRow(-1):$0x.rows[0];if($0y){r.style.backgroundColor='white';};for(var j=0;j<cl;j++){var c=($0y)?r.insertCell(-1):r.cells[j];if($0y){c.style.padding='0px';c.style.border='0px none';c.style.height='1px';c.style.overflow='visible';c.style.width=(100.0/$05.length)+"%";var $X=document.createElement("div");$X.style.display='block';$X.style.marginRight=$b.columnMarginRight+"px";$X.style.position='relative';$X.style.height='1px';$X.style.fontSize='1px';$X.style.lineHeight='1.2';$X.style.marginTop='-1px';c.appendChild($X);}}};for(var i=0;i<$0N;i++){var $0z=this.cssOnly?0:1;var r=($0y)?$0x.insertRow(-1):$0x.rows[i+$0z];if($0y){r.style.MozUserSelect='none';r.style.KhtmlUserSelect='none';};for(var j=0;j<cl;j++){var $0s=this.columns[j];var c=($0y)?r.insertCell(-1):r.cells[j];c.start=$0s.Start.addTime(i*$L);c.end=c.start.addTime($L);c.onmousedown=this.onCellMousedown;c.onmousemove=this.mousemove;c.onmouseup=function(){return false;};c.onclick=function(){return false;};if($0y){c.root=this;c.style.padding='0px';c.style.border='0px none';c.style.verticalAlign='top';if(!this.cssOnly){if(j!==cl-1){c.style.borderRight='1px solid '+$b.cellBorderColor;}};c.style.height=$b.cellHeight+'px';c.style.overflow='hidden';c.unselectable='on';if(!this.cssOnly){var $X=document.createElement("div");$X.unselectable='on';$X.style.fontSize='1px';$X.style.height='0px';var $0P=(c.end.getMinutes()+c.end.getSeconds()+c.end.getMilliseconds())>0;if($0P){if($b.hourHalfBorderColor!==''){$X.style.borderBottom='1px solid '+$b.hourHalfBorderColor;}}else{if($b.hourBorderColor!==''){$X.style.borderBottom='1px solid '+$b.hourBorderColor;}};var $0Q=document.createElement("div");$0Q.style.height=($b.cellHeight-1)+"px";$0Q.style.overflow='hidden';$0Q.unselectable='on';c.appendChild($0Q);}else{var $X=document.createElement("div");$X.unselectable='on';$X.style.height=$b.cellHeight+"px";$X.style.position="relative";$X.className=this.$1T("_cell");var $0R=this.$1X(c.start,c.end);if($0R&&this.cssOnly){DayPilot.Util.addClass($X,$b.$1T("_cell_business"));};var $0l=document.createElement("div");$0l.setAttribute("unselectable","on");$0l.className=this.$1T("_cell_inner");$X.appendChild($0l);c.appendChild($X);};c.appendChild($X);};c.style.backgroundColor=$b.cellBackColor;$0Q=c.firstChild;}};$0x.onmouseup=this.mouseup;$0x.root=this;$b.nav.scrollable.onmousemove=function(ev){ev=ev||window.event;var $0S=$b.nav.scrollable;$b.coords=DayPilot.mo3($0S,ev);var $Y=DayPilot.mc(ev);if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizingShadow=$b.createShadow(DayPilotCalendar.resizing,false,$b.shadow);};var $0T=$b.cellHeight;var $I=1;var $0U=($Y.y-DayPilotCalendar.originalMouse.y);if(DayPilotCalendar.resizing.dpBorder==='bottom'){var $0V=Math.floor(((DayPilotCalendar.originalHeight+DayPilotCalendar.originalTop+$0U)+$0T/ 2)/ $0T)*$0T-DayPilotCalendar.originalTop+$I;if($0V<$0T)$0V=$0T;var $04=$b.nav.main.clientHeight;if(DayPilotCalendar.originalTop+$0V>$04)$0V=$04-DayPilotCalendar.originalTop;DayPilotCalendar.resizingShadow.style.height=($0V-4)+'px';}else if(DayPilotCalendar.resizing.dpBorder==='top'){var $0W=Math.floor(((DayPilotCalendar.originalTop+$0U-$I)+$0T/ 2)/ $0T)*$0T+$I;if($0W<$I){$0W=$I;};if($0W>DayPilotCalendar.originalTop+DayPilotCalendar.originalHeight-$0T){$0W=DayPilotCalendar.originalTop+DayPilotCalendar.originalHeight-$0T;};var $0V=DayPilotCalendar.originalHeight-($0W-DayPilotCalendar.originalTop)-4;if($0V<$0T){$0V=$0T;}else{DayPilotCalendar.resizingShadow.style.top=$0W+'px';};DayPilotCalendar.resizingShadow.style.height=($0V)+'px';}}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.movingShadow=$b.createShadow(DayPilotCalendar.moving,!$b.ie,$b.shadow);DayPilotCalendar.movingShadow.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};if(!$b.coords){return;};var $0T=$b.cellHeight;var $I=1;var $0i=DayPilotCalendar.moveOffsetY;if(!$0i){$0i=$0T/2;};var $0W=Math.floor((($b.coords.y-$0i-$I)+$0T/ 2)/ $0T)*$0T+$I;if($0W<$I){$0W=$I;};var $0b=$b.nav.events;var $04=$b.nav.main.clientHeight;var $g=parseInt(DayPilotCalendar.movingShadow.style.height);if($0W+$g>$04){$0W=$04-$g;};DayPilotCalendar.movingShadow.parentNode.style.display='none';DayPilotCalendar.movingShadow.style.top=$0W+'px';DayPilotCalendar.movingShadow.parentNode.style.display='';var $0X=$0b.clientWidth/$0b.rows[0].cells.length;var $l=Math.floor(($b.coords.x-45)/$0X);if($l<0){$l=0;};if($l<$0b.rows[0].cells.length&&$l>=0&&DayPilotCalendar.movingShadow.column!==$l){DayPilotCalendar.movingShadow.column=$l;DayPilotCalendar.moveShadow($0b.rows[0].cells[$l]);}}};$b.nav.scrollable.style.display='';};this.$1X=function($J,end){if(this.businessBeginsHour<this.businessEndsHour){return !($J.getHours()<this.businessBeginsHour||$J.getHours()>=this.businessEndsHour||$J.getDayOfWeek()===6||$J.getDayOfWeek()===0);};if($J.getHours()>=this.businessBeginsHour){return true;};if($J.getHours()<this.businessEndsHour){return true;};return false;};this.disposeHeader=function(){var $0x=this.nav.header;if($0x&&$0x.rows){for(var y=0;y<$0x.rows.length;y++){var r=$0x.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.onclick=null;c.onmousemove=null;c.onmouseout=null;}}};if(!this.fasterDispose)DayPilot.pu($0x);};this.drawHeaderRow=function($0y){var r=($0y)?this.nav.header.insertRow(-1):this.nav.header.rows[0];var $05=this.columns;var $0Y=$05.length;for(var i=0;i<$0Y;i++){var $o=$05[i];var $c=($0y)?r.insertCell(-1):r.cells[i];$c.data=$o;$c.style.overflow='hidden';$c.style.padding='0px';$c.style.border='0px none';$c.style.height=(this.headerHeight)+"px";var $X=($0y)?document.createElement("div"):$c.firstChild;if($0y){$X.unselectable='on';$X.style.MozUserSelect='none';$X.style.backgroundColor=$o.BackColor;$X.style.cursor='default';$X.style.position='relative';if(!this.cssOnly){$X.style.fontFamily=this.headerFontFamily;$X.style.fontSize=this.headerFontSize;$X.style.color=this.headerFontColor;if(i!==$0Y-1){$X.style.borderRight="1px solid "+this.borderColor;}}else{$X.className=$b.$1T('_colheader');};$X.style.height=this.headerHeight+"px";var $0C=document.createElement("div");if(!this.cssOnly){$0C.style.position='absolute';$0C.style.left='0px';$0C.style.width='100%';$0C.style.padding="2px";$X.style.textAlign='center';}else{$0C.className=$b.$1T('_colheader_inner');};$0C.unselectable='on';$X.appendChild($0C);$c.appendChild($X);};var $0C=$X.firstChild;$0C.innerHTML=$o.InnerHTML;}};this.widthUnit=function(){if(this.width&&this.width.indexOf("px")!==-1){return "Pixel";};return "Percentage";};this.drawHeader=function(){var $0u=this.nav.header;var $0y=true;var $05=this.columns;var $0Y=$05.length;while(this.headerCreated&&$0u&&$0u.rows&&$0u.rows.length>0&&$0y){if(!this.fasterDispose)DayPilot.pu($0u.rows[0]);$0u.deleteRow(0);};this.headerCreated=true;if(!$0y){var $0I=$b.nav.corner;if(!this.cssOnly){$0I.style.backgroundColor=$b.cornerBackColor;};if(!this.fasterDispose)DayPilot.pu($0I.firstChild);};this.drawHeaderRow($0y);};this.loadingStart=function(){if(this.loadingLabelVisible){this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.top=(this.headerHeight+5)+"px";this.nav.loading.style.display='';}};this.commandCallBack=function($0Z,$o){var $F={};$F.command=$0Z;this.$1N('Command',$o,$F);};this.loadingStop=function($10){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.nav.loading.style.display='none';};this.$1Y=function(){var $11=this.nav.scroll;if(!$11.onscroll){$11.onscroll=function(){$b.$1Z();};};var $12=(typeof this.$20.scrollpos!=='undefined')?this.$20.scrollpos:this.initScrollPos;if(!$12){return;};if($12==='Auto'){if(this.heightSpec==="BusinessHours"){$12=2*this.cellHeight*this.businessBeginsHour;}else{$12=0;}};$11.root=this;if($11.scrollTop===0){$11.scrollTop=$12;}};this.callbackError=function($s,$t){alert("Error!\r\nResult: "+$s+"\r\nContext:"+$t);};this.$21=function(){var w=DayPilot.sw(this.nav.scroll);var d=this.nav.cornerRight;if(d&&w>0){if(this.cssOnly){d.style.width=w+'px';}else{d.style.width=(w-3)+'px';}}};this.registerGlobalHandlers=function(){if(!DayPilotCalendar.globalHandlers){DayPilotCalendar.globalHandlers=true;DayPilot.re(document,'mouseup',DayPilotCalendar.gMouseUp);DayPilot.re(window,'unload',DayPilotCalendar.gUnload);}};this.events={};this.events.add=function(e){e.calendar=$b;if(!$b.events.list){$b.events.list=[];};$b.events.list.push(e.data);$b.update();$b.$1R.notify();};this.events.update=function(e){e.commit();$b.update();$b.$1R.notify();};this.events.remove=function(e){var $13=DayPilot.indexOf($b.events.list,e.data);$b.events.list.splice($13,1);$b.update();$b.$1R.notify();};this.update=function(){$b.$22();$b.prepareVariables();$b.deleteEvents();var $14=true;if($14){$b.prepareColumns();$b.drawHeader();$b.drawMain();$b.drawHourTable();$b.updateHeight();$b.$1W();$b.$23();};$b.loadEvents();$b.updateHeaderHeight();$b.$1P();$b.drawEvents();$b.clearSelection();if(this.visible){this.show();}else{this.hide();}};this.$24=function(){if(this.id&&this.id.tagName){this.nav.top=this.id;}else if(typeof this.id==="string"){this.nav.top=document.getElementById(this.id);if(!this.nav.top){throw "DayPilot.Calendar: The placeholder element not found: '"+id+"'.";}}else{throw "DayPilot.Calendar() constructor requires the target element or its ID as a parameter";}};this.$25={};this.$25.events=[];this.$26=function(i){var $15=this.$25.events;var $o=this.events.list[i];var $16={};for(var name in $o){$16[name]=$o[name];};if(typeof this.onBeforeEventRender==='function'){var $C={};$C.data=$16;this.onBeforeEventRender($C);};$15[i]=$16;};this.loadEvents=function(){var $0O=this.events.list;$b.$25.events=[];if(!$0O){return;};var length=$0O.length;var $17=24*60*60*1000;this.cache.pixels={};var $18=[];this.scrollLabels=[];this.minStart=10000;this.maxEnd=0;for(var i=0;i<length;i++){var e=$0O[i];e.start=new DayPilot.Date(e.start);e.end=new DayPilot.Date(e.end);};if(typeof this.onBeforeEventRender==='function'){for(var i=0;i<length;i++){this.$26(i);}};for(var i=0;i<this.columns.length;i++){var scroll={};scroll.minEnd=1000000;scroll.maxStart=-1;this.scrollLabels.push(scroll);var $0s=this.columns[i];$0s.events=[];$0s.lines=[];$0s.blocks=[];var $19=new DayPilot.Date($0s.Start);var $1a=$19.getTime();var $1b=$19.addTime($17);var $1c=$1b.getTime();for(var j=0;j<length;j++){if($18[j]){continue;};var e=$0O[j];var $J=e.start;var end=e.end;var $1d=$J.getTime();var $1e=end.getTime();if($1e<$1d){continue;};var $1f=!($1e<=$1a||$1d>=$1c);if($1f){var ep=new DayPilot.Event(e,$b);ep.part.dayIndex=i;ep.part.start=$1a<$1d?e.start:$19;ep.part.end=$1c>$1e?e.end:$1b;var $1g=this.getPixels(ep.part.start,$0s.Start);var $1h=this.getPixels(ep.part.end,$0s.Start);var top=$1g.top;var $1i=$1h.top;if(top===$1i&&($1g.cut||$1h.cut)){continue;};var $1j=$1h.boxBottom;ep.part.top=Math.floor(top/this.cellHeight)*this.cellHeight+1;ep.part.height=Math.max(Math.ceil($1j/this.cellHeight)*this.cellHeight-ep.part.top,this.cellHeight-1)+1;ep.part.barTop=Math.max(top-ep.part.top-1,0);ep.part.barHeight=Math.max($1i-top-2,1);var $J=ep.part.top;var end=ep.part.top+ep.part.height;if($J>scroll.maxStart){scroll.maxStart=$J;};if(end<scroll.minEnd){scroll.minEnd=end;};if($J<this.minStart){this.minStart=$J;};if(end>this.maxEnd){this.maxEnd=end;};$0s.events.push(ep);if(typeof this.onBeforeEventRender==='function'){ep.cache=this.$25.events[j];};if(ep.part.start.getTime()===$1d&&ep.part.end.getTime()===$1e){$18[j]=true;}}}};for(var i=0;i<this.columns.length;i++){var $0s=this.columns[i];$0s.events.sort(this.eventComparer);for(var j=0;j<$0s.events.length;j++){var e=$0s.events[j];$0s.putIntoBlock(e);};for(var j=0;j<$0s.blocks.length;j++){var $00=$0s.blocks[j];$00.events.sort(this.eventComparer);for(var k=0;k<$00.events.length;k++){var e=$00.events[k];$00.putIntoLine(e);}}}};this.eventComparer=function(a,b){if(!a||!b||!a.start||!b.start){return 0;};var $1k=a.start().getTime()-b.start().getTime();if($1k!==0){return $1k;};var $1l=b.end().getTime()-a.end().getTime();return $1l;};this.debug=function($10,$1m){if(!this.debuggingEnabled){return;};if(!$b.debugMessages){$b.debugMessages=[];};$b.debugMessages.push($10);if(typeof console!=='undefined'){console.log($10);}};this.getPixels=function($R,$J){if(!$J)$J=this.startDate;var $1d=$J.getTime();var $1n=$R.getTime();var $15=this.cache.pixels[$1n+"_"+$1d];if($15){return $15;};$1d=$J.getTime();var $1o=30*60*1000;var $1p=$1n-$1d;var $1q=$1p%$1o;var $1r=$1p-$1q;var $1s=$1r+$1o;if($1q===0){$1s=$1r;};var $s={};$s.cut=false;$s.top=this.ticksToPixels($1p);$s.boxTop=this.ticksToPixels($1r);$s.boxBottom=this.ticksToPixels($1s);this.cache.pixels[$1n+"_"+$1d]=$s;return $s;};this.ticksToPixels=function($1n){return Math.floor((this.cellHeight*$1n)/(1000*60*30));};this.prepareVariables=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart();};this.updateHeaderHeight=function(){if(this.nav.corner){this.nav.corner.style.height=this.headerHeight+"px";}};this.updateHeight=function(){var sh=this.getScrollableHeight();if(this.nav.scroll&&sh>0){this.nav.scroll.style.height=sh+"px";}};this.$1R={};this.$1R.scope=null;this.$1R.notify=function(){if($b.$1R.scope){$b.$1R.scope["$apply"]();}};this.$1R.apply=function(f){f();};this.$1Z=function(){var top=$b.nav.scroll.scrollTop;var $1t=top/(2*$b.cellHeight);$b.$20.scrollHour=$1t;};this.$23=function(){var $12=0;if($b.$20.scrollHour){$12=2*$b.cellHeight*$b.$20.scrollHour;}else{if($b.initScrollPos==='Auto'){if(this.heightSpec==="BusinessHours"){$12=2*this.cellHeight*this.businessBeginsHour;}else{$12=0;}}};$b.nav.scroll.scrollTop=$12;};this.$27=function(){if(this.backendUrl||typeof WebForm_DoCallback==='function'){return(typeof $b.events.list==='undefined')||(!$b.events.list);}else{return false;}};this.$1P=function(){if(this.nav.top.style.visibility==='hidden'){this.nav.top.style.visibility='visible';}};this.show=function(){$b.visible=true;$b.nav.top.style.display='';};this.hide=function(){$b.visible=false;$b.nav.top.style.display='none';};this.$28=function(){this.prepareVariables();this.prepareColumns();this.drawTop();this.drawHeader();this.drawMain();this.$21();this.$1Y();this.registerGlobalHandlers();DayPilotCalendar.register(this);this.$29();this.$1N('Init');};this.$20={};this.$2a=function(){this.$20.themes=[];this.$20.themes.push(this.theme||this.cssClassPrefix);};this.$2b=function(){var $1u=this.$20.themes;for(var i=0;i<$1u.length;i++){var $1v=$1u[i];DayPilot.Util.removeClass(this.nav.top,$1v+"_main");};this.$20.themes=[];};this.$2c=function(){this.afterRender(null,false);if(typeof this.onAfterRender==="function"){var $C={};$C.isCallBack=false;this.onAfterRender($C);}};this.$2d=function(){if(typeof this.onInit==="function"&&!this.$2e){this.$2e=true;var $C={};this.onInit($C);}};this.$22=function(){if(!$b.cssOnly){$b.cssOnly=true;window.console&&window.console.log&&window.console.log("DayPilot: cssOnly = false mode is not supported anymore.");}};this.$2f=function(){var el=$b.nav.top;return el.offsetWidth>0&&el.offsetHeight>0;};this.$29=function(){var $1w=$b.$2f;if(!$1w()){$b.$2g=setInterval(function(){if($1w()){$b.$1Y();$b.$21();clearInterval($b.$2g);}},100);}};this.init=function(){this.$24();var $1x=this.$27();this.$22();this.$2a();if($1x){this.$28();return;};this.prepareVariables();this.prepareColumns();this.loadEvents();this.drawTop();this.drawHeader();this.drawMain();this.$1P();this.$21();this.$1Y();this.registerGlobalHandlers();DayPilotCalendar.register(this);if(this.events){this.updateHeaderHeight();this.drawEvents();};this.$2c();this.$2d();this.$29();this.initialized=true;};this.Init=this.init;};DayPilotCalendar.Cell=function($J,end,$l){this.start=$J;this.end=end;this.column=function(){};};DayPilotCalendar.Column=function($1y,name,$R){this.value=$1y;this.name=name;this.date=new DayPilot.Date($R);};DayPilot.Calendar=DayPilotCalendar.Calendar;if(typeof jQuery!=='undefined'){(function($){$.fn.daypilotCalendar=function($1z){var $1A=null;var j=this.each(function(){if(this.daypilot){return;};var $1B=new DayPilot.Calendar(this.id);this.daypilot=$1B;for(name in $1z){$1B[name]=$1z[name];};$1B.init();if(!$1A){$1A=$1B;}});if(this.length===1){return $1A;}else{return j;}};})(jQuery);};(function registerAngularModule(){var $1C=DayPilot.am();if(!$1C){return;};$1C.directive("daypilotCalendar",['$parse',function($1D){return{"restrict":"E","template":"<div></div>","replace":true,"link":function($1E,element,$1F){var $b=new DayPilot.Calendar(element[0]);$b.$1R.scope=$1E;$b.init();var $1G=$1F["id"];if($1G){$1E[$1G]=$b;};var $1H=$1F["publishAs"];if($1H){var getter=$1D($1H);var setter=getter.assign;setter($1E,$b);};for(var name in $1F){if(name.indexOf("on")===0){(function(name){$b[name]=function($C){var f=$1D($1F[name]);$1E["$apply"](function(){f($1E,{"args":$C});});};})(name);}};var $1I=$1E["$watch"];var $1J=$1F["config"]||$1F["daypilotConfig"];var $0O=$1F["events"]||$1F["daypilotEvents"];$1I.call($1E,$1J,function($1y){for(var name in $1y){$b[name]=$1y[name];};$b.update();$b.$2d();},true);$1I.call($1E,$0O,function($1y){$b.events.list=$1y;$b.update();},true);}};}]);})();})();


